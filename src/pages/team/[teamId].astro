---
import Layout from '@layouts/Layout.astro'
import Container from '@components/Container.astro'
import TeamSelectorCards from '@components/TeamSelectorCards.astro'

export async function getStaticPaths() {
  const response = await fetch('https://kingsleague.jonanv.workers.dev/teams')
	const teams = await response.json()
  return teams.map(team => ({
    params: { teamId: team.id },
    props: { ...team }
  }))
}
const {
	name, 
	image, 
	presidentId, 
	coach, 
	channel, 
	players
} = Astro.props
---

<Layout title={name}>
	<Container>

		<section class="flex items-center justify-between">
			<div class="flex items-center gap-x-12">
				<img src={image} alt={`Escudo del equipo ${name}`} width="130"  height="130" />
				<h1 class="font-bold text-5xl">{name}</h1>
			</div>
			<a href={channel} class="text-purple-900 font-bold" target="_blank" rel="noopener noreferrer">
				Twitch
			</a>
		</section>

		<section class="my-2">
			<ul>
				<li><b>Presidente:</b> { presidentId }</li>
				<li><b>Entrenador:</b> { coach }</li>
				<li><b>Jugadores:</b> { players.length }</li>
			</ul>
		</section>

		<section class='grid grid-cols-5 gap-2'>
			{
				players.map(({ name, image, role }) => (
					<article class='text-center font-title text-slate-900 bg-white rounded-sm p-5 m-auto'>
						<img
							class='w-36 h-auto'
							src={`https://kingsleague.jonanv.workers.dev/static/players/${image}`}
							alt={`${name}`}
						/>
						<p>{ name }</p>
						<p class='text-slate-600 font-body'>{ role }</p>
					</article>
				))
			}
		</section>

		<section class='my-2'>Estad√≠sticas</section>

		<TeamSelectorCards />
		
	</Container>
</Layout>
